// Do not edit directly!
// This file was generated by camel-quarkus-maven-plugin:update-extension-doc-page
= SQL
:page-aliases: extensions/sql.adoc
:linkattrs:
:cq-artifact-id: camel-quarkus-sql
:cq-native-supported: true
:cq-status: Stable
:cq-status-deprecation: Stable
:cq-description: Perform SQL queries using Spring JDBC.
:cq-deprecated: false
:cq-jvm-since: 1.0.0
:cq-native-since: 1.0.0

[.badges]
[.badge-key]##JVM since##[.badge-supported]##1.0.0## [.badge-key]##Native since##[.badge-supported]##1.0.0##

Perform SQL queries using Spring JDBC.

== What's inside

* xref:{cq-camel-components}::sql-component.adoc[SQL component], URI syntax: `sql:query`
* xref:{cq-camel-components}::sql-stored-component.adoc[SQL Stored Procedure component], URI syntax: `sql-stored:template`

Please refer to the above links for usage and configuration details.

== Maven coordinates

https://code.quarkus.io/?extension-search=camel-quarkus-sql[Create a new project with this extension on code.quarkus.io, window="_blank"]

Or add the coordinates to your existing project:

[source,xml]
----
<dependency>
    <groupId>org.apache.camel.quarkus</groupId>
    <artifactId>camel-quarkus-sql</artifactId>
</dependency>
----

Check the xref:user-guide/index.adoc[User guide] for more information about writing Camel Quarkus applications.

== Usage

If you are using SQL Aggregator in native mode, you have to register several classes for serialization using GraalVM
feature. Serialization support since GraalVM 21.0 allows developers to configure classes for serialization via
the serialization configuration file `-H:SerializationConfigurationResources=/path-to/serialization-config.json` option.
For more information see https://github.com/oracle/graal/pull/2730[pull request with feature].

Several classes has to be registered for serialization every time to make SQL Aggregator work in native.
Here is a template of `serialization-config.json` with all mandatory classes:

```
[
  {
    "name" : "java.lang.Integer"
  },
  {
    "name" : "java.lang.Number"
  },
  {
    "name" : "java.lang.String"
  },
  {
    "name" : "java.util.HashMap"
  },
  {
    "name" : "java.util.LinkedHashMap"
  },
  {
    "name" : "org.apache.camel.support.DefaultExchangeHolder"
  }
]
```



== Additional Camel Quarkus configuration

=== Configuring a DataSource

This extension leverages https://quarkus.io/guides/datasource[Quarkus Agroal] for `DataSource` support. Setting up a `DataSource` can be achieved via configuration properties.

[source,properties]
----
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=your-username
quarkus.datasource.password=your-password
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/your-database
quarkus.datasource.jdbc.max-size=16
----

The Camel SQL component will automatically resolve the `DataSource` bean from the registry. When configuring multiple datasources, you can specify which one is to be used on an SQL endpoint via
the URI options `datasource` or `dataSourceRef`. Refer to the SQL component documentation for more details.

=== SQL scripts
When configuring `sql` or `sql-stored` endpoints to reference script files from the classpath, set the following configuration property to ensure that they are available in native mode.
Note that URI schemes such as `file` or `http` do not need to be listed.

[source,properties]
----
quarkus.camel.sql.script-files = queries.sql, classpath:sql/insert.sql
----


[width="100%",cols="80,5,15",options="header"]
|===
| Configuration property | Type | Default


|icon:lock[title=Fixed at build time] [[quarkus.camel.sql.script-files]]`link:#quarkus.camel.sql.script-files[quarkus.camel.sql.script-files]`

A comma separated list of paths to script files referenced by SQL endpoints. Script files that only need to be accessible from the classpath should be specified on this property. Paths can either be schemeless (E.g sql/my-script.sql) or be prefixed with the classpath: URI scheme (E.g classpath:sql/my-script.sql). Other URI schemes are not supported.
| `string`
| 
|===

[.configuration-legend]
icon:lock[title=Fixed at build time] Configuration property fixed at build time. All other configuration properties are overridable at runtime.

